<!doctype html>
<html ng-app="xmpl">
<head>
    <title>fun</title>
    <script src="lib/angular/angular.min.js"></script>
    <script src="lib/angular/angular-animate.min.js"></script>
    <script>
        angular.module('xmpl.service', []).
          value('greeter', {
              salutation: 'Hello',
              localize: function (localization) {
                  this.salutation = localization.salutation;
              },
              greet: function (name) {
                  return this.salutation + ' ' + name + '!';
              }
          }).
          value('user', {
              load: function (name) {
                  this.name = name;
              }
          });

        angular.module('xmpl.directive', []).
            directive('xmplHelloDirective', function factory($parse) {
                var directiveDefinitionObject = {
                    template: '<div>{{plea}}!</div>',
                    scope: {
                        plea: '='
                    }
                };
                return directiveDefinitionObject;
            });

        angular.module('xmpl.filter', []);

        angular.module('xmpl', ['xmpl.service', 'xmpl.directive', 'xmpl.filter']).
          run(function (greeter, user) {
              // This is effectively part of the main method initialization code
              greeter.localize({
                  salutation: 'Bonjour'
              });
              user.load('World');
          })


        // A Controller for your app
        var XmplController = function ($scope, greeter, user) {
            $scope.greeting = greeter.greet(user.name);
            $scope.plea = 'make this work';
        }
    </script>
</head>
<body>
    <div ng-controller="XmplController">
        {{ greeting }}!
        <div data-xmpl-hello-directive data-plea="plea"></div>
    </div>
</body>
</html>
